syntax = "proto3";
package users.public;
option go_package = "./";

import "google/api/annotations.proto";

service Users {
  // GET /authViaGoogle
  rpc AuthViaGoogle(AuthViaGoogleRequest) returns (AuthViaGoogleResponse) {
    option (google.api.http) = {
      get: "/authViaGoogle"
    };
  }

  // GET /googleOAuthCallback
  rpc GoogleOAuthCallback(GoogleOAuthCallbackRequest) returns (GoogleOAuthCallbackResponse) {
    option (google.api.http) = {
      get: "/googleOAuthCallback"
    };
  }

  // POST /refreshAccessToken
  rpc RefreshAccessToken(RefreshAccessTokenRequest) returns (RefreshAccessTokenResponse) {
    option (google.api.http) = {
      post: "/refreshAccessToken"
      body: "*"
    };
  }

  // GET /getUser
  rpc GetUser(GetUserRequest) returns (GetUserResponse) {
    option (google.api.http) = {
      get: "/getUser"
    };
  }
}

message AuthViaGoogleRequest {
  reserved 1;
  string location = 2;
}

message AuthViaGoogleResponse {
  string login_url = 1;
}

message GoogleOAuthCallbackRequest {
  string code = 1;
  string state = 2;
  string error = 3;
  string error_description = 4;
  string scope = 5;
}

message GoogleOAuthCallbackResponse {
  string access_token = 1;
  string refresh_token = 2;
  string redirect_url = 3;
}

message RefreshAccessTokenRequest {
  string refresh_token = 1;
}

message RefreshAccessTokenResponse {
  string access_token = 1;
  string refresh_token = 2;
}

message GetUserRequest {
  uint64 ID = 1;
  string email = 2;
}

message GetUserResponse {
  uint64 ID = 1;
  string email = 2;
  string first_name = 3;
  string last_name = 4;
  string profile_picture = 5;
}